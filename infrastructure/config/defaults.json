{
  "infrastructure": {
    "naming": {
      "convention": "customer-project-environment-resource",
      "max_length": 63,
      "allowed_chars": "a-z0-9-",
      "separator": "-"
    },
    "locations": {
      "primary": "eastus",
      "secondary": "westus2",
      "backup": "centralus"
    },
    "environments": {
      "development": {
        "suffix": "dev",
        "tags": {
          "environment": "development",
          "cost_center": "dev-ops",
          "owner": "development-team"
        }
      },
      "staging": {
        "suffix": "stg",
        "tags": {
          "environment": "staging",
          "cost_center": "staging-ops",
          "owner": "qa-team"
        }
      },
      "production": {
        "suffix": "prod",
        "tags": {
          "environment": "production",
          "cost_center": "production-ops",
          "owner": "operations-team"
        }
      }
    }
  },
  "azure": {
    "subscription": {
      "required_roles": ["Contributor", "Owner"],
      "required_providers": [
        "Microsoft.Web",
        "Microsoft.DocumentDB",
        "Microsoft.Storage",
        "Microsoft.ContainerRegistry",
        "Microsoft.KeyVault",
        "Microsoft.OperationalInsights",
        "Microsoft.Insights",
        "Microsoft.Network",
        "Microsoft.ManagedIdentity",
        "Microsoft.CognitiveServices"
      ]
    },
    "resource_groups": {
      "naming": "{customer_prefix}-studio-{environment}-rg",
      "tags": {
        "managed_by": "terraform",
        "project": "studio",
        "deployment_date": "{timestamp}"
      }
    },
    "networking": {
      "virtual_network": {
        "address_space": "10.0.0.0/16",
        "subnets": {
          "app_service": {
            "name": "app-service-subnet",
            "address_prefix": "10.0.1.0/24",
            "delegations": ["Microsoft.Web/serverFarms"]
          },
          "private_endpoints": {
            "name": "private-endpoints-subnet",
            "address_prefix": "10.0.2.0/24"
          },
          "databases": {
            "name": "databases-subnet",
            "address_prefix": "10.0.3.0/24"
          }
        }
      },
      "network_security_groups": {
        "app_service": {
          "rules": [
            {
              "name": "AllowHTTPS",
              "priority": 100,
              "direction": "Inbound",
              "access": "Allow",
              "protocol": "Tcp",
              "source_port_range": "*",
              "destination_port_range": "443",
              "source_address_prefix": "Internet",
              "destination_address_prefix": "*"
            },
            {
              "name": "AllowHTTP",
              "priority": 110,
              "direction": "Inbound",
              "access": "Allow",
              "protocol": "Tcp",
              "source_port_range": "*",
              "destination_port_range": "80",
              "source_address_prefix": "Internet",
              "destination_address_prefix": "*"
            }
          ]
        }
      }
    },
    "app_service": {
      "plans": {
        "development": {
          "sku": "B1",
          "capacity": 1,
          "auto_scaling": false
        },
        "staging": {
          "sku": "S1",
          "capacity": 1,
          "auto_scaling": true,
          "min_capacity": 1,
          "max_capacity": 3
        },
        "production": {
          "sku": "P1v3",
          "capacity": 2,
          "auto_scaling": true,
          "min_capacity": 2,
          "max_capacity": 10
        }
      },
      "applications": {
        "frontend": {
          "runtime": "node:20",
          "always_on": true,
          "https_only": true,
          "min_tls_version": "1.2",
          "ftps_state": "Disabled"
        },
        "backend": {
          "runtime": "python:3.11",
          "always_on": true,
          "https_only": true,
          "min_tls_version": "1.2",
          "ftps_state": "Disabled"
        }
      }
    },
    "cosmos_db": {
      "postgresql": {
        "development": {
          "coordinator_vcore_count": 2,
          "coordinator_storage_quota_mb": 131072,
          "node_count": 0,
          "enable_high_availability": false
        },
        "staging": {
          "coordinator_vcore_count": 4,
          "coordinator_storage_quota_mb": 262144,
          "node_count": 1,
          "enable_high_availability": false
        },
        "production": {
          "coordinator_vcore_count": 8,
          "coordinator_storage_quota_mb": 524288,
          "node_count": 2,
          "enable_high_availability": true
        }
      },
      "mongodb": {
        "development": {
          "sku_name": "M30",
          "disk_size_gb": 32,
          "node_count": 1,
          "enable_high_availability": false
        },
        "staging": {
          "sku_name": "M40",
          "disk_size_gb": 64,
          "node_count": 2,
          "enable_high_availability": false
        },
        "production": {
          "sku_name": "M50",
          "disk_size_gb": 128,
          "node_count": 3,
          "enable_high_availability": true
        }
      }
    },
    "storage": {
      "account": {
        "development": {
          "tier": "Standard",
          "replication": "LRS",
          "kind": "StorageV2"
        },
        "staging": {
          "tier": "Standard",
          "replication": "ZRS",
          "kind": "StorageV2"
        },
        "production": {
          "tier": "Premium",
          "replication": "GRS",
          "kind": "FileStorage"
        }
      },
      "containers": {
        "user_files": {
          "name": "user-files",
          "access_type": "private",
          "public_access": false
        },
        "temp_files": {
          "name": "temp-files",
          "access_type": "private",
          "public_access": false
        },
        "backups": {
          "name": "backups",
          "access_type": "private",
          "public_access": false
        }
      }
    },
    "container_registry": {
      "development": {
        "sku": "Basic",
        "admin_enabled": true,
        "georeplication_locations": []
      },
      "staging": {
        "sku": "Standard",
        "admin_enabled": true,
        "georeplication_locations": []
      },
      "production": {
        "sku": "Premium",
        "admin_enabled": false,
        "georeplication_locations": ["westus2", "eastus2"]
      }
    },
    "key_vault": {
      "sku": "standard",
      "soft_delete_retention_days": 7,
      "purge_protection_enabled": false,
      "enable_rbac_authorization": true,
      "secrets": {
        "cosmos_postgresql_connection": {
          "name": "cosmos-postgresql-connection",
          "description": "Cosmos DB PostgreSQL connection string"
        },
        "cosmos_mongodb_connection": {
          "name": "cosmos-mongodb-connection",
          "description": "Cosmos DB MongoDB connection string"
        },
        "storage_connection_string": {
          "name": "storage-connection-string",
          "description": "Azure Storage connection string"
        },
        "azure_openai_api_key": {
          "name": "azure-openai-api-key",
          "description": "Azure OpenAI API key"
        },
        "azure_openai_endpoint": {
          "name": "azure-openai-endpoint",
          "description": "Azure OpenAI endpoint"
        },
        "azure_ad_client_secret": {
          "name": "azure-ad-client-secret",
          "description": "Azure AD client secret"
        }
      }
    },
    "ai_foundry": {
      "openai": {
        "sku": "S0",
        "models": {
          "gpt4": {
            "name": "gpt-4",
            "version": "0613",
            "capacity": 30
          },
          "gpt35": {
            "name": "gpt-35-turbo",
            "version": "0613",
            "capacity": 60
          },
          "embedding": {
            "name": "text-embedding-ada-002",
            "version": "2",
            "capacity": 30
          }
        }
      },
      "content_safety": {
        "enabled": true,
        "sku": "S0"
      },
      "ai_search": {
        "enabled": false,
        "sku": "standard",
        "replica_count": 1,
        "partition_count": 1
      }
    },
    "monitoring": {
      "log_analytics": {
        "sku": "PerGB2018",
        "retention_days": 30
      },
      "application_insights": {
        "application_type": "web",
        "workspace_mode": "workspace-based"
      },
      "alerts": {
        "app_service": {
          "cpu_threshold": 80,
          "memory_threshold": 80
        },
        "database": {
          "connections_threshold": 80
        },
        "cost": {
          "monthly_budget": 1000,
          "alert_threshold": 90
        }
      }
    }
  },
  "application": {
    "frontend": {
      "framework": "nextjs",
      "node_version": "20",
      "build_command": "npm run build",
      "start_command": "npm start",
      "environment_variables": {
        "NODE_ENV": "production",
        "NEXT_TELEMETRY_DISABLED": "1"
      }
    },
    "backend": {
      "framework": "fastapi",
      "python_version": "3.11",
      "start_command": "uvicorn main:app --host 0.0.0.0 --port 8000",
      "environment_variables": {
        "PYTHONPATH": "/app",
        "PYTHONUNBUFFERED": "1"
      }
    }
  },
  "deployment": {
    "terraform": {
      "version": ">= 1.0.0",
      "azure_provider_version": "~> 3.0",
      "required_providers": [
        "azurerm",
        "azuread",
        "random"
      ]
    },
    "scripts": {
      "deploy": {
        "timeout": 3600,
        "retry_attempts": 3,
        "backoff_delay": 60
      },
      "validate": {
        "timeout": 1800,
        "tools": ["terraform", "tflint", "tfsec"]
      }
    }
  },
  "security": {
    "authentication": {
      "provider": "azure_ad",
      "multi_factor": true,
      "conditional_access": true
    },
    "network": {
      "private_endpoints": true,
      "network_security_groups": true,
      "ddos_protection": true
    },
    "data": {
      "encryption_at_rest": true,
      "encryption_in_transit": true,
      "customer_managed_keys": false
    },
    "compliance": {
      "standards": ["SOC2", "ISO27001"],
      "audit_logging": true,
      "backup_retention": 30
    }
  },
  "cost_optimization": {
    "development": {
      "estimated_monthly_cost": 50,
      "auto_shutdown": true,
      "reserved_instances": false
    },
    "staging": {
      "estimated_monthly_cost": 200,
      "auto_shutdown": false,
      "reserved_instances": false
    },
    "production": {
      "estimated_monthly_cost": 800,
      "auto_shutdown": false,
      "reserved_instances": true
    }
  }
}
