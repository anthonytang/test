<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Dev Playground - Model Comparison</title>
    <link rel="stylesheet" href="/playground/styles.css">
</head>
<body>
    <div class="container">
        <h1>ðŸ”¬ Studio Dev Playground - Model Comparison</h1>
        <p class="subtitle">Test the pipeline with different models: Upload â†’ Search â†’ Retrieve â†’ Generate</p>

        <form id="playgroundForm">
            <div class="section">
                <label for="modelName">Model Name</label>
                <select id="modelName" name="modelName">
                    <option value="gpt-4o" selected>gpt-4o (Default)</option>
                    <option value="gpt-4o-mini">gpt-4o-mini (Faster, Cheaper)</option>
                    <option value="gpt-5.2-chat">gpt-5.2 (Smarter, More Expensive)</option>
                </select>
                <div id="modelInfo" class="model-info">
                    Selected model: <strong>gpt-4o</strong>
                </div>
            </div>

            <div class="section">
                <label for="outputFormat">Output Format</label>
                <select id="outputFormat" name="outputFormat">
                    <option value="text" selected>Text (Narrative Response)</option>
                    <option value="table">Table (Structured Data)</option>
                    <option value="chart">Chart (Data Visualization)</option>
                </select>
                <div id="formatInfo" class="model-info" style="background: #f3e5f5; color: #6a1b9a;">
                    Selected format: <strong>Text</strong>
                </div>
            </div>

            <div class="section">
                <label for="files">Upload Files (PDF, Excel, CSV, etc.)</label>
                <input type="file" id="files" name="files" multiple accept=".pdf,.xlsx,.csv,.txt,.html">
                <div id="fileInfo" class="file-info" style="display: none;"></div>
            </div>

            <div class="section">
                <label for="sectionName">Section Name</label>
                <input type="text" id="sectionName" placeholder="e.g., Revenue Analysis">
            </div>

            <div class="section">
                <label for="sectionDescription">Section Description</label>
                <textarea id="sectionDescription" rows="4"
                          placeholder="e.g., What was the company's revenue in Q4 2024? Provide a breakdown by segment."></textarea>
            </div>

            <button type="submit" id="submitBtn">Run Pipeline</button>
        </form>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Processing pipeline...</p>
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="results" class="results">
            <!-- Processing Logs -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('logs')">
                    <div>
                        <div class="step-title">ðŸ“‹ Processing Logs</div>
                    </div>
                    <span class="toggle-icon" id="logs-icon">â–¼</span>
                </div>
                <div class="step-content" id="logs-content">
                    <div id="logsList" style="background: #f9f9f9; padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.8;"></div>
                </div>
            </div>

            <!-- Step 1: Search Queries -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('queries')">
                    <div>
                        <div class="step-title">1. Search Queries Generated</div>
                    </div>
                    <span class="toggle-icon" id="queries-icon">â–¼</span>
                </div>
                <div class="step-content" id="queries-content">
                    <ul class="query-list" id="queryList"></ul>
                </div>
            </div>

            <!-- Step 2: Retrieved Chunks -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('chunks')">
                    <div>
                        <div class="step-title">2. Retrieved Chunks</div>
                    </div>
                    <span class="toggle-icon" id="chunks-icon">â–¼</span>
                </div>
                <div class="step-content" id="chunks-content">
                    <div id="chunksSummary" style="background: #e3f2fd; padding: 12px; border-radius: 4px; margin-bottom: 16px; font-weight: 600; color: #1565c0;"></div>
                    <div id="chunkList"></div>
                </div>
            </div>

            <!-- Step 3: Numbered Context -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('context')">
                    <div>
                        <div class="step-title">3. Numbered Context (sent to AI)</div>
                    </div>
                    <span class="toggle-icon" id="context-icon">â–¼</span>
                </div>
                <div class="step-content" id="context-content">
                    <pre id="contextText"></pre>
                </div>
            </div>

            <!-- Step 4: Cited Sources -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('cited')">
                    <div>
                        <div class="step-title">4. Cited Sources (lines referenced by AI)</div>
                    </div>
                    <span class="toggle-icon" id="cited-icon">â–¼</span>
                </div>
                <div class="step-content expanded" id="cited-content">
                    <pre id="citedText"></pre>
                </div>
            </div>

            <!-- Step 5: AI Response -->
            <div class="pipeline-step">
                <div class="step-header" onclick="toggleStep('response')">
                    <div>
                        <div class="step-title">5. AI Response with Citations</div>
                    </div>
                    <span class="toggle-icon" id="response-icon">â–¼</span>
                </div>
                <div class="step-content expanded" id="response-content">
                    <div id="responseText"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/playground/script.js"></script>
</body>
</html>
